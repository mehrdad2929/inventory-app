<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="/stylesheets/index.css">
</head>

<body>
  <h1><%= title %></h1>
  <form action="/" method="GET" >
    <div class="search">
        <h3>Search:</h3>
        <div class="search-bar">
            <label for="search">item name:</label>
            <input 
                type="search" 
                id="search" 
                name="search"
                value="<%= searchTerm || '' %>"
            >
       </div>
   </div>
    <div class="order">
        <h3>Order By:</h3>
        <div class="order-by">
            <input 
                type="radio" 
                id="name" 
                name="orderBy" 
                value="name"
                <%= (orderBy === 'name' || !orderBy) ? 'checked' : '' %>
            >
            <label for="name">Order by name</label><br>
            
            <input 
                type="radio" 
                id="price" 
                name="orderBy" 
                value="price"
                <%= orderBy === 'price' ? 'checked' : '' %>
            >
            <label for="price">Order by price</label><br>
            <h4>Direction:</h4>
                <div class="order-direction">
                    <div>
                        <input 
                            type="radio" 
                            id="asc" 
                            name="orderDirection" 
                            value="ASC"
                            <%= (orderDirection === 'ASC' || !orderDirection) ? 'checked' : '' %>
                        >
                        <label for="asc">Ascending (A→Z, 0→9)</label>
                    </div>
                    
                    <div>
                        <input 
                            type="radio" 
                            id="desc" 
                            name="orderDirection" 
                            value="DESC"
                            <%= orderDirection === 'DESC' ? 'checked' : '' %>
                        >
                        <label for="desc">Descending (Z→A, 9→0)</label>
                    </div>
                </div>
        </div>
    </div>
    <div class="categories">
        <h3>Categories:</h3>
        <div class="category-list">
            <% categories.forEach(function(category) { %>
                <div class="category-item">
                    <input 
                        type="checkbox" 
                        id="cat-<%= category.id %>" 
                        name="categories" 
                        value="<%= category.id %>"
                        <%= selectedCategories.includes(String(category.id)) ? 'checked' : '' %>
                    >
                    <label for="cat-<%= category.id %>">
                        <span class="category-color" style="background-color: <%= category.color %>;"></span>
                        <%= category.category %>
                    </label>
                </div>
            <% }); %>
        </div>
    </div>
    <div class="price-filters">
        <h3>Price Range</h3>
        <div class="price-input-group">
            <label for="minPrice">Min:</label>
            <input 
                type="number" 
                id="minPrice" 
                name="minPrice" 
                placeholder="Min price"
                min="0"
                value="<%= minPrice || '' %>"
            >
            
            <span>-</span>
            
            <label for="maxPrice">Max:</label>
            <input 
                type="number" 
                id="maxPrice" 
                name="maxPrice" 
                placeholder="Max price"
                min="0"
                value="<%= maxPrice || '' %>"
            >
        </div>
    </div>
    <button type="submit">Submit</button>
  </form>
    <ul>
      <% if (locals.itemList) {%>
        <% itemList.forEach(function(item) { %>
            <li>ID: <%= item.id %>, Name: <%= item.name %> , Price: <%= item.price %>,
                Category: <%= item.category %>
                <img src="<%= item.src %>" alt="<%= item.name %>" width="500" height="600">
                <a href="/<%= item.id %>">to item</a>
            </li>
        <% }); %>
      <% } %>
    </ul>
    <a href="/add">add new item</a>
</body>

</html>
